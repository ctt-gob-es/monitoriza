<div class="container-fluid">
	<h4 class="c-grey-900 mT-10 mB-30" th:text="#{applalert.admin.title}"></h4>
	<div class="row">
		<div class="col-md-12">
			<div class="bgc-white bd bdrs-3 p-20 mB-20">
				<h4 class="c-grey-900 mB-20"
					th:text="#{applalert.summaries.admin.title}"></h4>
				<table id="summariesTable"
					class="table table-striped table-bordered" cellspacing="0"
					width="100%">
					<thead>
						<tr>
							<th th:text="#{table.summaries.name}"></th>
							<th th:text="#{table.summaries.description}"></th>
							<th th:text="#{table.summaries.periodicity}"></th>
							<th th:text="#{table.summaries.active}"></th>
						</tr>
					</thead>
				</table>
			</div>
		</div>
	</div>
</div>
<div class="modal" tabindex="-1" role="dialog" id="summaryModal">
	<div class="modal-dialog">
		<div class="modal-content" style="margin-left: -50%; width: 200%;">
			<div class="modal-header">
				<h4 class="modal-title"
					th:text="#{applalert.summaries.modal.add.title}"></h4>
				<button type="button" class="close" data-dismiss="modal"
					aria-label="Cerrar">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<div class="row gap-30 masonry pos-r">
					<div class="masonry-sizer col-md-12"></div>
					<div class="masonry-item col-md-6">
						<div class="bgc-white p-20 bd">
							<div>
								<form id="summaryform" name="summaryform" role="form"
									th:object="${summaryform}" th:action="@{/saveservice}"
									method="post" enctype="multipart/form-data">

									<!--  <input type='hidden' class='primarykey' id="idService" th:field="*{idService}"> -->

									<div class="form-row">
										<div class="form-group col-md-12">
											<label for="name" th:text="#{applalert.summaries.modal.name}"></label>
											<input type="text" class="form-control" id="name">
										</div>
									</div>
									<div class="form-row">
										<div
											class="checkbox checkbox-circle checkbox-info peers mL-5 mB-20 mT-10">
											<input type="checkbox" id="isActive" name="isActive"
												class="peer"> <label for="isActive"
												class="peers peer-greed js-sb ai-c"> <span
												class="peer peer-greed"
												th:text="#{applalert.summaries.modal.activeresume}"></span>
											</label>
										</div>
									</div>
									<div class="form-row">
										<div class="form-group col-md-12">
											<label for="description"
												th:text="#{applalert.summaries.modal.description}"></label>
											<input type="text" class="form-control" id="description">
										</div>
									</div>
									<div class="form-row">
										<div class="form-group col-md-12">
											<label for="periodicity"
												th:text="#{applalert.summaries.modal.periodicity}"></label>
											<select id="periodicity" class="form-control" required>
												<option selected="selected" value="hourly"
													th:text="#{applalert.summaries.modal.periodicity.select.hourly}"></option>
												<option selected="selected" value="daily"
													th:text="#{applalert.summaries.modal.periodicity.select.daily}"></option>
												<option selected="selected" value="weekly"
													th:text="#{applalert.summaries.modal.periodicity.select.weekly}"></option>
												<option selected="selected" value="monthly"
													th:text="#{applalert.summaries.modal.periodicity.select.monthly}"></option>
											</select>
										</div>
									</div>
									<div class="form-row">
										<div class="form-group col-md-10">
											<label for="notifsystem"
												th:text="#{applalert.summaries.modal.notifsystem}"></label>
											<select id="notifsystem" class="form-control" required>
												<option selected="selected" value="-1">Correo
													electronico</option>
											</select>
										</div>
										<div class="form-group col-md-2 align-self-end">
											<button id="addNotifSystem" type="submit"
												class="btn btn-primary"
												th:text="#{applalert.summaries.modal.btn.add}"></button>
										</div>
									</div>
									<div class="form-row">
										<div class="form-group dt-buttons btn-group">
											<button id="config" type="submit"
												class="btn btn-secondary disabled mL-5"
												th:text="#{applalert.summaries.modal.btn.config}"></button>
											<button id="delete" class="btn btn-secondary disabled"
												onclick="cleanServiceForm();"
												th:text="#{applalert.summaries.modal.btn.delete}"></button>
										</div>
									</div>
									<table id="notifSystemTable"
										class="table table-striped table-bordered" cellspacing="0"
										width="100%">
										<thead>
											<tr>
												<!-- Columna oculta para el identificador de la plataforma -->
												<th th:text="#{applalert.summaries.modal.notifsystem}"></th>
											</tr>
										</thead>
									</table>
							</div>
						</div>
					</div>

					<div class="masonry-item col-md-6">
						<div class="bgc-white p-20 bd">
							<h6 class="c-grey-900"
								th:text="#{applalert.summaries.modal.alertslist}"></h6>
							<div class="mT-30">
								<div class="form-row">
									<div class="form-group col-md-4">
										<label for="application"
											th:text="#{applalert.summaries.modal.table.application}"></label>
										<select id="application" class="form-control" required>
											<option selected="selected" value="-1">APLICACION1</option>
										</select>
									</div>
									<div class="form-group col-md-2 align-self-end">
										<button id="addNotifSystem" type="submit"
											class="btn btn-primary"
											th:text="#{applalert.summaries.modal.btn.addall}"></button>
									</div>
									<div class="form-group col-md-3 mL-25">
										<label for="alert"
											th:text="#{applalert.summaries.modal.table.alert}"></label> <select
											id="alert" class="form-control" required>
											<option selected="selected" value="-1">ALERTA1</option>
										</select>
									</div>
									<div class="form-group col-md-2 align-self-end">
										<button id="addNotifSystem" type="submit"
											class="btn btn-primary"
											th:text="#{applalert.summaries.modal.btn.add}"></button>
									</div>
								</div>
								<div class="form-row">
									<div class="form-group col-md-6">
										<button id="deleteAlert" type="submit"
											class="btn btn-secondary disabled"
											th:text="#{applalert.summaries.modal.btn.delete}"></button>
									</div>
								</div>
								<table id="alertListTable"
									class="table table-striped table-bordered" cellspacing="0"
									width="100%">
									<thead>
										<tr>
											<!-- Columna oculta para el identificador de la plataforma -->
											<th th:text="#{applalert.summaries.modal.table.application}"></th>
											<th th:text="#{applalert.summaries.modal.table.alert}"></th>
										</tr>
									</thead>
								</table>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="modal-footer">
			<!-- onclick="closeButton('summaryModal')" -->
				<button type="button" class="btn btn-default" data-dismiss="modal" th:text="#{button.close}"></button>
				<button type="submit" id="summaryButton" class="btn btn-primary" th:text="#{applalert.summaries.modal.btn.accept}"></button>
			</div>
		</div>
	</div>
</div>

<script th:inline="javascript">
$(document).ready(function() {
	var getResumes = /*[[@{/resumesdatatable}]]*/;
	var addTemplate = /*[[@{/addresume}]]*/;
	
	var tbl = $('#summariesTable').DataTable({
		dom: 'Bfrtip',
	    select: 'single',
	    responsive: true,
	    
	    altEditor: true,
	    buttons: [{text: 'Agregar', name: 'addSummary',
					action: function ( e, dt, node, config ) {
				  
					$('#summaryModal').modal('show');
  				  
  				  /*for (var o = dt, a = [], e = 0; e < o.context[0].aoColumns.length; e++) a.push({
						id: o.context[0].aoColumns[e].mData,
						title: o.context[0].aoColumns[e].sTitle                
					  });
					  
					  var d = dt.rows({
                      selected: !0
					  });
						
					  var idUserMonitorizaEdit = d.data()[0][a[0].id];
					  var name = d.data()[0][a[1].id];
					  var surnames = d.data()[0][a[2].id];
					  var login = d.data()[0][a[3].id];
					  var email = d.data()[0][a[5].id];
					  
					  $("#idUserMonitorizaEdit").val(idUserMonitorizaEdit);
					  $("#nameEdit").val(name);
					  $("#surnamesEdit").val(surnames);
					  $("#loginEdit").val(login);
					  $("#emailEdit").val(email);*/
					
  			  }}, 
	    	{extend: 'selected',text: 'Editar',name: 'edit'}, 
	    	{extend: 'selected',text: 'Eliminar',name: 'delete'}
			],
	
	    "iTotalRecords": "totalElements",
        "iTotalDisplayRecords": "numberOfElements",
	    
		"processing": true,
	    "serverSide": true,
	    "language": {
	        "url": "js/datatables/i18n/spanish.json",
	        select: {
	            rows: {
	                _: "%d filas seleccionadas",
	                1: "1 fila seleccionada"
	            }
	          }
	        },
		"ajax": {
				"url": getResumes,
				"dataSrc" : "data",
				"data": function (data) {
					// Datos a pasar al modal
					// data.formId = "nodeForm";
					// data.editTemplate = editTemplate;
					data.addTemplate = addTemplate;
			        }
		},
		"columns": [
	        { "data": "name" },
	        { "data": "description" },
	        { "data": "periodicity" },
	        { "data": "enabled" }
	        ]
		});
});	

</script>