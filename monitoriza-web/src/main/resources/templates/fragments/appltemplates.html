<div class="container-fluid">
	<h4 class="c-grey-900 mT-10 mB-30" th:text="#{applalert.admin.title}"></h4>
	<div class="row">
		<div class="col-md-12">
			<div class="bgc-white bd bdrs-3 p-20 mB-20">
				<h4 class="c-grey-900 mB-20" th:text="#{applalert.templates.admin.title}"></h4>
				<table id="templatesTable" class="table table-striped table-bordered" 
					cellspacing="0" width="100%">
					<thead>
						<tr>
							<th th:text="#{table.templates.template}"></th>
							<th th:text="#{table.templates.description}"></th>
						</tr>
					</thead>
				</table>
			</div>
		</div>
	</div>
</div>

<div class="modal" tabindex="-1" role="dialog" id="importTemplateModal">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h4 class="modal-title" th:text="#{applalert.templates.modal.importtemplate}"></h4>
				<button type="button" class="close" data-dismiss="modal" aria-label="Cerrar" onclick="closeButton('importTemplateModal')">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<form role="form" id="importTemplateForm" th:object="${importtemplateform}" th:action="@{/importtemplate}" method="post">
					
					<div class="form-group">
						<label class="col-form-label" th:text="#{applalert.templates.modal.templatefile}"></label>
					</div>
	
					<div class="form-group">
						<div class="custom-file" id="customFile" lang="es">
						<input type="file" class="custom-file-input" id="file" th:field="*{file}" aria-describedby="fileHelp">
						<label class="custom-file-label" for="file" th:text="#{applalert.templates.modal.selectfile}"></label>
					</div>
					<div style="clear:both;"/>
					</div>
				</form>

			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal" th:text="#{button.close}"></button>
				<button type="submit" id="passwordBtn" class="btn btn-primary" th:text="#{button.save}"></button>
			</div>
		</div>
	</div>
</div>


<script th:inline="javascript">
$(document).ready(function() {
	
	var addTemplate = /*[[@{/importtemplate}]]*/;
	var editTemplate = /*[[@{/edittemplate}]]*/;
	var getTemplates = /*[[@{/templatesdatatable}]]*/;
		
	var tbl = $('#templatesTable').DataTable({
		dom: 'Bfrtip',
	    select: 'single',
	    responsive: true,
	    altEditor: true,
	    buttons: [{text: 'Importar',name: 'import',
						action: function ( e, dt, node, config ) {
							$('#importTemplateModal').show();
						}
					}, 
	    		  {extend: 'selected',text: 'Exportar',name: 'export'}, 
	    		  {extend: 'selected',text: 'Editar', name: 'edit'}, 
	    		  {extend: 'selected',text: 'Eliminar',name: 'delete'}],
	    		  
	    "iTotalRecords": "totalElements",
        "iTotalDisplayRecords": "numberOfElements",
	    
		"processing": true,
	    "serverSide": true,
	    "language": {
	        "url": "js/datatables/i18n/spanish.json",
	        select: {
	            rows: {
	                _: "%d filas seleccionadas",
	                1: "1 fila seleccionada"
	            }
	          }
	        },
		"ajax": {
			"url": getTemplates,
			"dataSrc" : "data",
			"data": function (data) {
				// Datos a pasar al modal
				// data.formId = "nodeForm";
				// data.editTemplate = editTemplate;
				//data.addTemplate = addTemplate;
		}
		},
		"columns": [
	        { "data": "idTemplateMonitoriza"},
	        { "data": "name" }
	        ]
		});
});	

</script>